{"ast":null,"code":"import { criteriaMap } from '../config/criteriaMap';\n\nvar isLocationMatch = function isLocationMatch(brand, criteria, selected) {\n  return brand.fields[criteria.contentfulField].fields && selected[criteria.name].includes(brand.fields[criteria.contentfulField].fields.country);\n};\n\nexport var filterBrands = function filterBrands(brand, selected) {\n  var matches = [];\n  criteriaMap.forEach(function (criteria, index) {\n    // if no nothing from criteria selected, matches\n    matches[index] = selected[criteria.name].length === 0; // if brand doesn't contain criteria field, skip\n\n    if (!brand.fields[criteria.contentfulField]) {\n      return;\n    } // if criteria matches location\n\n\n    if (criteria.name === 'location') {\n      if (isLocationMatch(brand, criteria, selected)) {\n        matches[index] = true;\n      }\n    } // if criteria doesn't match location\n\n\n    if (criteria.name !== 'location') {\n      brand.fields[criteria.contentfulField].forEach(function (field) {\n        // if criteria is a string\n        if (typeof field === 'string') {\n          if (selected[criteria.name].includes(field)) {\n            matches[index] = true;\n          } // if criteria is not a string\n\n        } else if (field.fields && selected[criteria.name].includes(field.fields.slug)) {\n          matches[index] = true;\n        }\n      });\n    }\n  });\n  return matches.every(function (match) {\n    return match;\n  });\n};","map":null,"metadata":{},"sourceType":"module"}